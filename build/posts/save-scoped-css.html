<!DOCTYPE html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>Save scoped CSS | Keith J Grant</title><meta name="description" content=""><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#666"><link rel="alternate" type="application/rss+xml" title="Keith J Grant" href="http://keithjgrant.com/feed.xml"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif|Palanquin:100,700" type="text/css"><link rel="stylesheet" href="/css/main.min.css"></head><body><nav class="topnav"><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/posts">Posts</a></li><li><a href="/talks">Talks</a></li></ul></nav><div class="masthead"><h1 class="page-title">Save scoped CSS</h1></div><main class="l-main"><article class="post"><div class="post-content"><p><em><strong>Update June 23:</strong> The editor&#39;s draft has been updated again. It looks like <code>@scope</code> is gone for good. The way forward now lies in the Shadow DOM.</em></p>
<hr>
<p>About <a href="/posts/into-the-future-of-css.html#scoped-css">a year ago</a>, I wrote about a promising feature of CSS, scoping. I love the idea of this feature, and I think it could be one of the most important changes in the near future of CSS. You know all those complaints about â€œin CSS everything is global&quot;? This feature is the answer.</p>
<p>I became excited recently when I noticed some movement in the W3C concerning this spec. So I took a look at what was going on. I found some good news, and I found some bad news.</p>
<h2 id="the-good-news">The good news</h2>
<p>The <a href="https://drafts.csswg.org/css-scoping/">editor&#39;s draft of the specification</a> has recently been updated. The changes, I think, significantly improve the viability of the feature. They more closely resemble the hypothetical changes I wished for last year. Most importantly, scoped styles would no longer need to be defined inline in the HTML document; you can define scoped styles in an external stylesheet.</p>
<p>The proposed syntax looks like this, using a new <code>@scope</code> at-rule:</p>
<pre><code class="lang-css">@scope .foo-module {
  p {
    color: blue;
  }
}

@scope .bar-module {
  p {
    color: red;
  }
}
</code></pre>
<p>Each scope is defined with a selector (<code>.foo-module</code>, <code>.bar-module</code>). This establishes a new scope for matched elements and their descendants. Inside the braces that follow, you can specify any styles you wish. These styles are then applied only to the elements belonging to that scope.</p>
<p>According to the rules of <a href="https://www.w3.org/TR/css-cascade-3/#cascade-scope">the cascade</a>, rules applied to an inner scope will override those applied to an outer scope, <em>regardless of their selector specificity</em>. This is precisely the behavior CSS-in-JS and/or CSS Modules users want! And yes, this definition is in the current Candidate Recommendation of the spec.</p>
<p>This means, given the example above, a <code>foo-module</code> inside a <code>bar-module</code> will have blue text; and a <code>bar-module</code> inside a <code>foo-module</code> will have red text. This could solve so many developer frustrations.</p>
<h2 id="the-bad-news">The bad news</h2>
<p>I got excited when I saw these changes, so I started reading more on what prompted them. I discovered that it is a sort of last-ditch effort to salvage the spec. The problem? Browser vendors have shown no interest in implementing it. Firefox has long-since implemented the earlier version of the spec, but that&#39;s it.</p>
<p>If we developers want this feature, we need to let the browser vendors know. Otherwise, it&#39;s DOA.</p>
<p>So tell them, please. Follow these links, and up-vote or leave comments in support of scoped styles:</p>
<ul>
<li><a href="https://groups.google.com/a/chromium.org/forum/#!searchin/blink-dev/scoped/blink-dev/R1x18ZLS5qQ/Bjuh_cENhlQJ">Chrome</a></li>
<li><a href="https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/14895573--scope">Edge</a></li>
<li>I couldn&#39;t find a channel for Safari. If you know where it is, please let me know and I&#39;ll add it here.</li>
</ul>
<p>Let&#39;s not allow this to die.</p>
</div><date class="post-date">9 June 2016</date></article><footer><a href="/posts">See more posts</a></footer></main><script src="/js/vendor/prettify.js"></script><script src="/js/run-prettify.js"></script><script>if (document.location.hostname !== 'localhost') {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37381912-2', 'auto');
  ga('send', 'pageview');
}</script></body>